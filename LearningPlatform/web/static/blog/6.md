## 滤波
图像滤波即在尽量保留图像细节特征的条件下对目标图像的噪声进行抑制。
### 中值滤波
中值滤波主要用于处理脉冲噪声（椒盐噪声），它是属于随机噪声，即在图像上随机出现的黑点或白点。中值滤波，是将卷积区域内的值==按顺序排列==，并取中值，作为该点的像素。
```c
//中值滤波
IMAGE Wavefiltering_Median(IMAGE im)
{
    BGRA* bgra = (BGRA*)malloc(sizeof(BGRA) * im.w * im.h);

    for (int unsigned i = 0; i < im.w * im.h; i++)
    {
        // 与卷积和对应重合区域的坐标
        int p[9] =   // p->position 位置坐标
        {
            i + im.w - 1,i + im.w,i + im.w + 1,
            i - 1,i,i + 1,
            i - im.w - 1,i - im.w,i - im.w + 1
        };

        // 判断是否越界
        for (int j = 0; j < 9; j++)
            if (p[j] < 0 || p[j] >= im.w * im.h)
                p[j] = i;

        // 取颜色
        int color[9] =
        {
            im.color[p[0]].blue, im.color[p[1]].blue, im.color[p[2]].blue,
            im.color[p[3]].blue, im.color[p[4]].blue, im.color[p[5]].blue,
            im.color[p[6]].blue, im.color[p[7]].blue, im.color[p[8]].blue
        };

        for (int n = 0; n < 9; n++)  // 对颜色进行排序
            for (int m = n; m < 9; m++)
                if (color[n] > color[m])   // 异或交换不能用等于号
                {
                    color[n] ^= color[m];
                    color[m] ^= color[n];
                    color[n] ^= color[m];
                }

        bgra[i].blue = color[4];
        bgra[i].green = color[4];
        bgra[i].red = color[4];
    }

    free(im.color);
    im.color = bgra;
    return im;
}
```

**滤波前后比较**
![请添加图片描述](https://img-blog.csdnimg.cn/aebdf68f7a1546538a7c4cd8ae109fef.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
![请添加图片描述](https://img-blog.csdnimg.cn/46b4d182d4d641c081837074f9296774.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
### 高斯滤波
高斯噪声是指它的概率密度函数服从高斯分布（即正态分布）的一类噪声。常见的高斯噪声包括起伏噪声、宇宙噪声、热噪声和散粒噪声等等。
>**高斯滤波公式**
>$$\frac{1}{16}\begin{bmatrix}
>1 & 2 & 1\\\\
>2 & 4 & 2\\\\
>1 & 2 & 1\\\\
>\end{bmatrix}$$

```c
//高斯滤波卷积核
double KERNELS_Wave_Gauss[9] =
{
    1, 2, 1,
    2, 4, 2,
    1, 2 ,1
};

//高斯滤波
IMAGE Wavefiltering_Gauss(IMAGE im)
{
    im = Kernels_use_DIY(im, KERNELS_Wave_Gauss, 9, 1.0 / 16);
    return im;
}

```
**效果和中值滤波差不多**
![请添加图片描述](https://img-blog.csdnimg.cn/f1ffb439f74144ea876f04089d2c43ab.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
### 低通滤波
低通滤波是增强图像的低频成分，阻挡高频成分，使图像变得平滑与模糊。

```c
// 低通滤波卷积核 LP1
double KERNELS_Wave_LowPass_LP1[9] =
{
    1 / 9.0, 1 / 9.0, 1 / 9.0,
    1 / 9.0, 1 / 9.0, 1 / 9.0,
    1 / 9.0, 1 / 9.0, 1 / 9.0
};

// 低通滤波卷积核 LP2
double KERNELS_Wave_LowPass_LP2[9] =
{
    1 / 10.0, 1 / 10.0, 1 / 10.0,
    1 / 10.0, 1 / 5.0, 1 / 10.0,
    1 / 10.0, 1 / 10.0, 1 / 10.0
};

// 低通滤波卷积核 LP3
double KERNELS_Wave_LowPass_LP3[9] =
{
    1 / 16.0, 1 / 8.0, 1 / 16.0,
    1 / 8.0, 1 / 4.0, 1 / 8.0,
    1 / 16.0, 1 / 8.0, 1 / 16.0
};


// 低通滤波
IMAGE Wavefiltering_LowPass(IMAGE im, double* kernels)
{
    im = Kernels_use_DIY(im, kernels, 9, 1);
    return im;
}
```
**LP1**
![请添加图片描述](https://img-blog.csdnimg.cn/14a5507f74f344b3abf2c2eb3401b866.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
**LP2**
![请添加图片描述](https://img-blog.csdnimg.cn/d2c5035693504ac3ad1246003677d5b1.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
**LP3**
![请添加图片描述](https://img-blog.csdnimg.cn/bd6fc06d44c847ccad2ebe2deca8c8ba.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
### 高通滤波
高通滤波是增强图像的高频成分，阻挡低频成分，使图像变得锐化与清晰。
```c
// 高通滤波卷积核 HP1
double KERNELS_Wave_HighPass_HP1[9] =
{
    -1, -1, -1,
    -1, 9, -1,
    -1, -1 ,-1
};

// 高通滤波卷积核 HP2
double KERNELS_Wave_HighPass_HP2[9] =
{
    0, -1, 0,
   -1, 5, -1,
    0, -1 ,0
};

// 高通滤波卷积核 HP3
double KERNELS_Wave_HighPass_HP3[9] =
{
    1, -2, 1,
   -2, 5, -2,
    1, -2 ,1
};

// 高通滤波
IMAGE Wavefiltering_HighPass(IMAGE im, double* kernels)
{
    im = Kernels_use_DIY(im, kernels, 9, 1);
    return im;
}
```
**HP1**
![请添加图片描述](https://img-blog.csdnimg.cn/b2f9fb9116e848439de12d3dc09f321b.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
**HP2**
![请添加图片描述](https://img-blog.csdnimg.cn/b4835207bc8f4625996e057e749ed967.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
**HP3**
![请添加图片描述](https://img-blog.csdnimg.cn/7f5ffb0ee740428bac05665a9cbfe1be.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)
### 均值滤波
和低通滤波差不多，都是使图像变得平滑与模糊。

```c
// 均值滤波卷积核
double KERNELS_Wave_Average[25] =
{
  1, 1, 1, 1, 1,
  1, 1, 1, 1, 1,
  1, 1, 1, 1, 1,
  1, 1, 1, 1, 1,
  1, 1, 1, 1, 1
};

// 均值滤波
IMAGE Wavefiltering_Average(IMAGE im)
{
    im = Kernels_use_DIY(im, KERNELS_Wave_Average, 25, 1.0 / 25);
    return im;
}

```
![请添加图片描述](https://img-blog.csdnimg.cn/38c1c95c23984e06adf59fa3a0405aec.bmp?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5aKo5bCYX01P,size_12,color_FFFFFF,t_70,g_se,x_16)